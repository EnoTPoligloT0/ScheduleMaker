@page
@model ScheduleMaker.Models.Event
@{
Layout = "/Pages/Layout.cshtml";
}

@{
ViewData["Title"] = "Event Calendar";
}

<h1>Event Calendar</h1>

<div id="calendar"></div>

@section Scripts {
    <!-- Import FullCalendar core and daygrid plugins -->
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.10.0/main.min.js"></script>

    <script>
    document.addEventListener('DOMContentLoaded', function () {
        var calendarEl = document.getElementById('calendar');
        var calendar = new FullCalendar.Calendar(calendarEl, {
            plugins: ['dayGrid, dayGridPlugin, interactionPlugin, timeGridPlugin'], // Include the plugins you want to use (e.g., dayGrid)
            // Add other configuration options as needed
            initialView: 'timeGridWeek', // Initial view when the calendar loads
            events: function (fetchInfo, successCallback, failureCallback) {
                fetch('/ScheduleMaker/event') // Fetch events from your API endpoint
                    .then(response => response.json())
                    .then(data => {
                        var events = data.map(event => {
                            return {
                                title: event.title,
                                start: event.startTime,
                                end: event.endTime
                            };
                        });
                        successCallback(events);
                    })
                    .catch(error => {
                        console.error('Error fetching events:', error);
                        failureCallback(error);
                    });
            },
           
        });
        calendar.render();
    });
</script>

    <script>
        const myModal = document.getElementById('myModal')
        const myInput = document.getElementById('myInput')

        myModal.addEventListener('shown.bs.modal', () => {
            myInput.focus()
        })
    
    </script>
}
