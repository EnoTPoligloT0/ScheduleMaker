<div class="modal fade" id="createEventModal" tabindex="-1" aria-labelledby="createEventModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="createEventModalLabel">Create Event</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="createEventForm" action="/ScheduleMaker/event" method="post">
                    <div class="mb-3">
                        <label for="eventTitle" class="form-label">Event Title</label>
                        <input type="text" class="form-control" id="eventTitle" name="Title" placeholder="Enter event title" required>
                    </div>
                    <div class="mb-3">
                        <label for="eventDescription" class="form-label">Event Description</label>
                        <textarea class="form-control" id="eventDescription" name="Description" rows="3" placeholder="Enter event description" required></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="eventStartTime" class="form-label">Event Start Day</label>
                        <input type="datetime-local" class="form-control" id="eventStartDay" name="StartTime" required>
                    </div>
                    
                    <div class="mb-3">
                        <label for="eventEndTime" class="form-label">Event End Day</label>
                        <input type="datetime-local" class="form-control" id="eventEndDay" name="EndTime" required>
                    </div>
                  
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary">Create Event</button>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    document.getElementById('createEventForm').addEventListener('submit', function(event) {
        event.preventDefault();

        var xhr = new XMLHttpRequest();
        xhr.open('POST', '/ScheduleMaker/event', true);
        xhr.setRequestHeader('Content-Type', 'application/json; charset=UTF-8');

        var eventTitle = document.getElementById('eventTitle').value;
        var eventDescription = document.getElementById('eventDescription').value;
        var eventStartDay = document.getElementById('eventStartDay').value;
        var eventEndDay = document.getElementById('eventEndDay').value;

        var data = {
            Title: eventTitle,
            Description: eventDescription,
            StartTime: eventStartDay,
            EndTime: eventEndDay
        };

        xhr.onload = function () {
            if (xhr.status == 201) {
                $('#createEventModal').modal('hide');
                // Optionally, refresh the calendar to show updated event
                $('#calendar').fullCalendar('refetchEvents');
            } else {
                alert('Failed to update event');
            }
        };
        
        xhr.send(JSON.stringify(data));
    });
</script>